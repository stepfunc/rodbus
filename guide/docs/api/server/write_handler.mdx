---
id: write_handler
title: WriteHandler Interface
sidebar_label: WriteHandler
slug: /api/outstation/write_handler
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

The `WriteHandler` interface processes write requests in your application code. Each callback receives a `Database`
object for applying changes. Typically, update the internal database when values are written.

:::note
In Rust, the `WriteHandler` does not exist, it is merged with the `RequestHandler` trait.
:::

:::warning
Never block in callback functions; they execute on the Runtime thread.
:::

## Return value

The return value of each callback function determines what is returned by the server. Here are the most common use cases:

- The received index and value are valid, the database is updated and a success value is returned.
- If the requested index doesn't exist, then an `ILLEGAL_DATA_ADDRESS` Modbus exception should be returned.
- If the requested value is not allowed for the point, then a `ILLEGAL_DATA_VALUE` Modbus exception should be returned.

The library automatically responds to improperly formatted requests such as ones containing invalid start/count combinations. Such invalid
requests are never forwarded to your application code.

Use the `WriteResult` value to return exceptions. It has three static methods: `success_init` creates a success result, `exception_init` creates a standard Modbus exception, and `raw_exception_init` creates a non-standard Modbus exception.

## Example

<Tabs
groupId="language"
defaultValue="Rust"
values={[
{label: 'Rust', value: 'Rust'},
{label: 'C', value: 'C'},
{label: 'C++', value: 'C++'},
{label: 'Java', value: 'Java'},
{label: 'C#', value: 'C#'},
]}>
<TabItem value="Rust">

```rust
{{#include ../examples/server/src/main.rs:request_handler}}
```

</TabItem>
<TabItem value="C">

```c
{{#include ../ffi/bindings/c/server_example.c:write_handler}}
```

</TabItem>
<TabItem value="C++">

```cpp
{{#include ../ffi/bindings/c/server_example.cpp:write_handler}}
```

</TabItem>
<TabItem value="Java">

```java
{{#include ../ffi/bindings/java/examples/src/main/java/io/stepfunc/rodbus/examples/ServerExample.java:write_handler}}
```

</TabItem>
<TabItem value="C#">

```csharp
{{#include ../ffi/bindings/dotnet/examples/server/Program.cs:write_handler}}
```

</TabItem>
</Tabs>
